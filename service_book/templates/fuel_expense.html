{% extends 'base.html' %}

{% block title %} Fuel expense {% endblock %}

{% block content %}
    <h3>Your current fuel expenses</h3>
    {% if fuel %}
    <table class="table" data-bs-theme="dark">
        <thead>
          <tr>
            <th>Date</th>
            <th>Car</th>
            <th>Miliage(km)</th>
            <th>Fuel type</th>
            <th>Fuel_amount(l)</th>

            <th>Price($)</th>
            <th>Description</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
        {% for item in fuel %}
          <tr>
            <td>{{ item.date }}</td>
            <td>{{ item.car }}</td>
            <td>{{ item.miliage }}</td>
            <td>{{ item.fuel_type }}</td>
            <td>{{ item.fuel_amount }}</td>
            <td>{{ item.price }}</td>
            <td>{{ item.description }}</td>
            <td>
              <a href="{% url 'edit_fuel_expense' item.pk %}" class="btn btn-sm btn-warning">Edit</a>
              <form action="{% url 'delete_fuel_expense' item.pk %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-danger"
                onclick="return confirm('Are you sure you want to delete this record?');">
                Delete
                </button>
              </form>
            </td>
          </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p>You haven't fuel expenses yet</p>
    {% endif %}
    <a href="{% url 'add_fuel_expense' %}">+ Add fuel expense</a>

    <h4>Fuel in your autos:</h4>
    <ul>
        {% for car in cars %}
            {% if car.avg_cons %}
    <li>{{ car.model }} has fuel in tank: {{ car.fuel_left|default:"0.00" }} Liters / </li>
            {% else %}
                <p> no data </p>
            {% endif %}
        {% endfor %}
    </ul>

{% for car in cars %}
    <h3>{{ car }}</h3>
    {% if car.avg_cons %}
        <p>Avarag cons: {{ car.avg_cons|floatformat:2 }} l/100km</p>
    {% else %}
        <p>No data for calculating</p>
    {% endif %}
{% endfor %}

{% endblock %}